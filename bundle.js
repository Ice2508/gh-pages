/*! For license information please see bundle.js.LICENSE.txt */
(()=>{"use strict";var t={186:(t,e,r)=>{t.exports=r.p+"2429af6d3a5796e3c34b.png"},227:(t,e,r)=>{t.exports=r.p+"f5c75398bcb5931f9f3c.png"},540:t=>{t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e,t.options),e}},756:(t,e,r)=>{t.exports=r.p+"bf0ed0dca1d1e6091d42.png"},1016:(t,e,r)=>{r.d(e,{A:()=>qt});var n=r(1601),o=r.n(n),a=r(6314),i=r.n(a),c=r(4417),l=r.n(c),u=new URL(r(7935),r.b),s=new URL(r(1409),r.b),f=new URL(r(3232),r.b),h=new URL(r(1265),r.b),p=new URL(r(6267),r.b),d=new URL(r(186),r.b),y=new URL(r(9745),r.b),m=new URL(r(8490),r.b),v=new URL(r(2573),r.b),g=new URL(r(4496),r.b),b=new URL(r(8956),r.b),w=new URL(r(9221),r.b),S=new URL(r(6092),r.b),x=new URL(r(4184),r.b),L=new URL(r(5513),r.b),k=new URL(r(3062),r.b),E=new URL(r(4875),r.b),P=new URL(r(5134),r.b),C=new URL(r(7335),r.b),O=new URL(r(6153),r.b),j=new URL(r(9e3),r.b),T=new URL(r(9593),r.b),_=new URL(r(5523),r.b),R=new URL(r(7986),r.b),G=new URL(r(4041),r.b),M=new URL(r(7538),r.b),A=new URL(r(1605),r.b),U=new URL(r(6318),r.b),I=new URL(r(3933),r.b),$=new URL(r(6291),r.b),N=new URL(r(9702),r.b),D=new URL(r(1906),r.b),z=new URL(r(4347),r.b),F=new URL(r(1216),r.b),B=new URL(r(4437),r.b),q=new URL(r(3160),r.b),H=new URL(r(8341),r.b),Y=new URL(r(2076),r.b),J=new URL(r(3860),r.b),Q=new URL(r(6943),r.b),W=new URL(r(6168),r.b),K=new URL(r(227),r.b),V=new URL(r(756),r.b),X=new URL(r(9334),r.b),Z=i()(o()),tt=l()(u),et=l()(s),rt=l()(f),nt=l()(h),ot=l()(p),at=l()(d),it=l()(y),ct=l()(m),lt=l()(v),ut=l()(g),st=l()(b),ft=l()(w),ht=l()(S),pt=l()(x),dt=l()(L),yt=l()(k),mt=l()(E),vt=l()(P),gt=l()(C),bt=l()(O),wt=l()(j),St=l()(T),xt=l()(_),Lt=l()(R),kt=l()(G),Et=l()(M),Pt=l()(A),Ct=l()(U),Ot=l()(I),jt=l()($),Tt=l()(N),_t=l()(D),Rt=l()(z),Gt=l()(F),Mt=l()(B),At=l()(q),Ut=l()(H),It=l()(Y),$t=l()(J),Nt=l()(Q),Dt=l()(W),zt=l()(K),Ft=l()(V),Bt=l()(X);Z.push([t.id,`:root {\n  --cell-size: 64px;\n}\n\nhtml, body {\n  height: 100%;\n  margin: 0;\n}\n\nbody {\n  background: #000;\n  font-size: 16px;\n}\n\n.btn {\n  display: inline-block;\n  font-weight: 400;\n  color: #212529;\n  background-color: #f8f9fa;\n  text-align: center;\n  vertical-align: middle;\n  padding: .375rem .75rem;\n  font-size: 1rem;\n  line-height: 1.5;\n  border-radius: .25rem;\n  transition: color .15s ease-in-out,background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out;\n  border: none;\n}\n\n.controls {\n  text-align: center;\n  margin: 50px 0;\n}\n\n.board-container {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-wrap: wrap;\n}\n\n.board {\n  display: grid;\n  grid-template-columns: repeat(8, 1fr);\n  grid-column-gap: 2px;\n  grid-row-gap: 2px;\n}\n\n.cell {\n  position: relative;\n}\n\n.cell.selected::before {\n  content: '';\n  display: block;\n  border: 4px;\n  border-radius: 32px;\n  box-sizing: border-box;\n  width: var(--cell-size);\n  height: var(--cell-size);\n  opacity: 0.9;\n  position: absolute;\n}\n\n.cell.selected-yellow::before {\n  border-color: #ff0;\n  border-style: solid;\n}\n\n.cell.selected-green::before {\n  border-color: #0f0;\n  border-style: dashed;\n}\n\n.cell.selected-red::before {\n  border-color: #f00;\n  border-style: dashed;\n}\n\n.board.prairie {\n  --map-tile-top-left-url: url(${tt});\n  --map-tile-top-url: url(${et});\n  --map-tile-top-right-url: url(${rt});\n  --map-tile-bottom-left-url: url(${nt});\n  --map-tile-bottom-url: url(${ot});\n  --map-tile-bottom-right-url: url(${at});\n  --map-tile-left-url: url(${it});\n  --map-tile-right-url: url(${ct});\n  --map-tile-center-url: url(${lt});\n}\n\n.board.desert {\n  --map-tile-top-left-url: url(${ut});\n  --map-tile-top-url: url(${st});\n  --map-tile-top-right-url: url(${ft});\n  --map-tile-bottom-left-url: url(${ht});\n  --map-tile-bottom-url: url(${pt});\n  --map-tile-bottom-right-url: url(${dt});\n  --map-tile-left-url: url(${yt});\n  --map-tile-right-url: url(${mt});\n  --map-tile-center-url: url(${vt});\n}\n\n.board.arctic {\n  --map-tile-top-left-url: url(${gt});\n  --map-tile-top-url: url(${bt});\n  --map-tile-top-right-url: url(${wt});\n  --map-tile-bottom-left-url: url(${St});\n  --map-tile-bottom-url: url(${xt});\n  --map-tile-bottom-right-url: url(${Lt});\n  --map-tile-left-url: url(${kt});\n  --map-tile-right-url: url(${Et});\n  --map-tile-center-url: url(${Pt});\n}\n\n.board.mountain {\n  --map-tile-top-left-url: url(${Ct});\n  --map-tile-top-url: url(${Ot});\n  --map-tile-top-right-url: url(${jt});\n  --map-tile-bottom-left-url: url(${Tt});\n  --map-tile-bottom-url: url(${_t});\n  --map-tile-bottom-right-url: url(${Rt});\n  --map-tile-left-url: url(${Gt});\n  --map-tile-right-url: url(${Mt});\n  --map-tile-center-url: url(${At});\n}\n\n.map-tile {\n  width: var(--cell-size);\n  height: var(--cell-size);\n}\n\n.map-tile-top-left {\n  background: var(--map-tile-top-left-url);\n}\n\n.map-tile-top {\n  background: var(--map-tile-top-url);\n}\n\n.map-tile-top-right {\n  background: var(--map-tile-top-right-url);\n}\n\n.map-tile-bottom-left {\n  background: var(--map-tile-bottom-left-url);\n}\n\n.map-tile-bottom {\n  background: var(--map-tile-bottom-url);\n}\n\n.map-tile-bottom-right {\n  background: var(--map-tile-bottom-right-url);\n}\n\n.map-tile-left {\n  background: var(--map-tile-left-url);\n}\n\n.map-tile-right {\n  background: var(--map-tile-right-url);\n}\n\n.map-tile-center {\n  background: var(--map-tile-center-url);\n}\n\n.character {\n  width: var(--cell-size);\n  height: var(--cell-size);\n  position: absolute;\n  z-index: 99;\n}\n\n.character.generic {\n  background: url(${Ut});\n}\n\n.character.bowman {\n  background: url(${It});\n}\n\n.character.daemon {\n  background: url(${$t});\n}\n\n.character.magician {\n  background: url(${Nt});\n}\n\n.character.swordsman {\n  background: url(${Dt});\n}\n\n.character.undead {\n  background: url(${zt});\n}\n\n.character.vampire {\n  background: url(${Ft});\n}\n\n.character.zombie {\n  background: url(${Bt});\n}\n\n.health-level {\n  top: 2px;\n  left: 7px;\n  position: absolute;\n  width: 50px;\n  height: 4px;\n  background: #000;\n}\n\n.health-level-indicator {\n  height: 4px;\n}\n\n.health-level-indicator-high {\n  background: #0f0;\n}\n\n.health-level-indicator-normal {\n  background: #ff0;\n}\n\n.health-level-indicator-critical {\n  background: #f00;\n}\n\n.damage {\n  position: absolute;\n  width: var(--cell-size);\n  text-align: center;\n  z-index: 999;\n  color: #f00;\n  font-weight: bold;\n  animation: 500ms fade ease-out;\n}\n\n@keyframes fade {\n  from {\n    opacity: 0;\n    top: calc(var(--cell-size) * 0.5);\n    font-size: 1rem;\n  }\n  to {\n    opacity: 1;\n    top: -20px;\n    font-size: 1.5rem;\n  }\n}\n`,""]);const qt=Z},1113:t=>{t.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}},1216:(t,e,r)=>{t.exports=r.p+"c75f062dddba6e98fdc6.png"},1265:(t,e,r)=>{t.exports=r.p+"26b5f224d8750119922d.png"},1409:(t,e,r)=>{t.exports=r.p+"946aeb948db6313f1d85.png"},1601:t=>{t.exports=function(t){return t[1]}},1605:(t,e,r)=>{t.exports=r.p+"246277b8ca590816b3e8.png"},1906:(t,e,r)=>{t.exports=r.p+"f462d2ed6eedca1e4fd9.png"},2076:(t,e,r)=>{t.exports=r.p+"cec542854b228e61547a.png"},2573:(t,e,r)=>{t.exports=r.p+"0089a610e6611f679b50.png"},3062:(t,e,r)=>{t.exports=r.p+"eb1f6e4f87b977012684.png"},3160:(t,e,r)=>{t.exports=r.p+"6f6f7c09bde970b2e41b.png"},3232:(t,e,r)=>{t.exports=r.p+"0ac7f8258ec7166dc957.png"},3860:(t,e,r)=>{t.exports=r.p+"cf170a9fea1051b7424a.png"},3933:(t,e,r)=>{t.exports=r.p+"8b928c3eb136543e573a.png"},4041:(t,e,r)=>{t.exports=r.p+"3d9503e0a850fda86f82.png"},4184:(t,e,r)=>{t.exports=r.p+"f1703771380a9959d979.png"},4347:(t,e,r)=>{t.exports=r.p+"6bacb8e25ed9ecf726bf.png"},4417:t=>{t.exports=function(t,e){return e||(e={}),t?(t=String(t.__esModule?t.default:t),/^['"].*['"]$/.test(t)&&(t=t.slice(1,-1)),e.hash&&(t+=e.hash),/["'() \t\n]|(%20)/.test(t)||e.needQuotes?'"'.concat(t.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):t):t}},4437:(t,e,r)=>{t.exports=r.p+"26fdc25019c24e87f11a.png"},4496:(t,e,r)=>{t.exports=r.p+"258d884122fabfc2f312.png"},4875:(t,e,r)=>{t.exports=r.p+"2c19971f327b288278bb.png"},5056:(t,e,r)=>{t.exports=function(t){var e=r.nc;e&&t.setAttribute("nonce",e)}},5072:t=>{var e=[];function r(t){for(var r=-1,n=0;n<e.length;n++)if(e[n].identifier===t){r=n;break}return r}function n(t,n){for(var a={},i=[],c=0;c<t.length;c++){var l=t[c],u=n.base?l[0]+n.base:l[0],s=a[u]||0,f="".concat(u," ").concat(s);a[u]=s+1;var h=r(f),p={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==h)e[h].references++,e[h].updater(p);else{var d=o(p,n);n.byIndex=c,e.splice(c,0,{identifier:f,updater:d,references:1})}i.push(f)}return i}function o(t,e){var r=e.domAPI(e);return r.update(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap&&e.supports===t.supports&&e.layer===t.layer)return;r.update(t=e)}else r.remove()}}t.exports=function(t,o){var a=n(t=t||[],o=o||{});return function(t){t=t||[];for(var i=0;i<a.length;i++){var c=r(a[i]);e[c].references--}for(var l=n(t,o),u=0;u<a.length;u++){var s=r(a[u]);0===e[s].references&&(e[s].updater(),e.splice(s,1))}a=l}}},5134:(t,e,r)=>{t.exports=r.p+"51e2a5de56bd631452fe.png"},5513:(t,e,r)=>{t.exports=r.p+"5cf9c17d6a1ea7106a6c.png"},5523:(t,e,r)=>{t.exports=r.p+"63aae58e4690953a3857.png"},6092:(t,e,r)=>{t.exports=r.p+"13edb269e39172ddd74f.png"},6153:(t,e,r)=>{t.exports=r.p+"e0aa3daf6d08c62c96d9.png"},6168:(t,e,r)=>{t.exports=r.p+"2007ec00c1d9f997e704.png"},6267:(t,e,r)=>{t.exports=r.p+"07d5e8127645225478b6.png"},6291:(t,e,r)=>{t.exports=r.p+"a1d2321024649b9d8f5f.png"},6314:t=>{t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var r="",n=void 0!==e[5];return e[4]&&(r+="@supports (".concat(e[4],") {")),e[2]&&(r+="@media ".concat(e[2]," {")),n&&(r+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),r+=t(e),n&&(r+="}"),e[2]&&(r+="}"),e[4]&&(r+="}"),r})).join("")},e.i=function(t,r,n,o,a){"string"==typeof t&&(t=[[null,t,void 0]]);var i={};if(n)for(var c=0;c<this.length;c++){var l=this[c][0];null!=l&&(i[l]=!0)}for(var u=0;u<t.length;u++){var s=[].concat(t[u]);n&&i[s[0]]||(void 0!==a&&(void 0===s[5]||(s[1]="@layer".concat(s[5].length>0?" ".concat(s[5]):""," {").concat(s[1],"}")),s[5]=a),r&&(s[2]?(s[1]="@media ".concat(s[2]," {").concat(s[1],"}"),s[2]=r):s[2]=r),o&&(s[4]?(s[1]="@supports (".concat(s[4],") {").concat(s[1],"}"),s[4]=o):s[4]="".concat(o)),e.push(s))}},e}},6318:(t,e,r)=>{t.exports=r.p+"ef1b0ea8c4e545d9aadc.png"},6943:(t,e,r)=>{t.exports=r.p+"c0fa2b75539f94144dc4.png"},7335:(t,e,r)=>{t.exports=r.p+"eab6a2cc5e89a4dd8e3f.png"},7538:(t,e,r)=>{t.exports=r.p+"22e7c5ede3f747cbe27a.png"},7659:t=>{var e={};t.exports=function(t,r){var n=function(t){if(void 0===e[t]){var r=document.querySelector(t);if(window.HTMLIFrameElement&&r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head}catch(t){r=null}e[t]=r}return e[t]}(t);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");n.appendChild(r)}},7825:t=>{t.exports=function(t){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var e=t.insertStyleElement(t);return{update:function(r){!function(t,e,r){var n="";r.supports&&(n+="@supports (".concat(r.supports,") {")),r.media&&(n+="@media ".concat(r.media," {"));var o=void 0!==r.layer;o&&(n+="@layer".concat(r.layer.length>0?" ".concat(r.layer):""," {")),n+=r.css,o&&(n+="}"),r.media&&(n+="}"),r.supports&&(n+="}");var a=r.sourceMap;a&&"undefined"!=typeof btoa&&(n+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a))))," */")),e.styleTagTransform(n,t,e.options)}(e,t,r)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)}}}},7935:(t,e,r)=>{t.exports=r.p+"46d63299c3420c030b4e.png"},7986:(t,e,r)=>{t.exports=r.p+"ac9d74f57639792774bc.png"},8341:(t,e,r)=>{t.exports=r.p+"0a77fc47d727eab6fd39.png"},8490:(t,e,r)=>{t.exports=r.p+"6a84ae91f5d985ddc9ee.png"},8956:(t,e,r)=>{t.exports=r.p+"dc3f97e7bbcd5ea1ded9.png"},9e3:(t,e,r)=>{t.exports=r.p+"d31d84c693f649766aee.png"},9221:(t,e,r)=>{t.exports=r.p+"2f1e1970c2c20cf3a8d5.png"},9334:(t,e,r)=>{t.exports=r.p+"296dfeac15e2377fc1dc.png"},9593:(t,e,r)=>{t.exports=r.p+"b27323cf850ed820855c.png"},9702:(t,e,r)=>{t.exports=r.p+"1d70f1dab2dd418c3612.png"},9745:(t,e,r)=>{t.exports=r.p+"546abb060a0837550fd1.png"}},e={};function r(n){var o=e[n];if(void 0!==o)return o.exports;var a=e[n]={id:n,exports:{}};return t[n](a,a.exports,r),a.exports}r.m=t,r.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return r.d(e,{a:e}),e},r.d=(t,e)=>{for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{var t;r.g.importScripts&&(t=r.g.location+"");var e=r.g.document;if(!t&&e&&(e.currentScript&&"SCRIPT"===e.currentScript.tagName.toUpperCase()&&(t=e.currentScript.src),!t)){var n=e.getElementsByTagName("script");if(n.length)for(var o=n.length-1;o>-1&&(!t||!/^http(s?):/.test(t));)t=n[o--].src}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/^blob:/,"").replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),r.p=t})(),r.b=document.baseURI||self.location.href,r.nc=void 0;var n=r(5072),o=r.n(n),a=r(7825),i=r.n(a),c=r(7659),l=r.n(c),u=r(5056),s=r.n(u),f=r(540),h=r.n(f),p=r(1113),d=r.n(p),y=r(1016),m={};function v(t){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},v(t)}function g(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,b(n.key),n)}}function b(t){var e=function(t){if("object"!=v(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=v(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==v(e)?e:e+""}m.styleTagTransform=d(),m.setAttributes=s(),m.insert=l().bind(null,"head"),m.domAPI=i(),m.insertStyleElement=h(),o()(y.A,m),y.A&&y.A.locals&&y.A.locals;var w=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.storage=e},e=[{key:"save",value:function(t){try{this.storage.setItem("gameState",JSON.stringify(t))}catch(t){throw new Error("Ошибка при сохранении игры")}}},{key:"load",value:function(){try{var t=this.storage.getItem("gameState");if(!t)throw new Error("Ошибка при загрузке игры");return JSON.parse(t)}catch(t){throw new Error("Ошибка при загрузке игры: "+t.message)}}}],e&&g(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();function S(t){return S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},S(t)}function x(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=L(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return i=t.done,t},e:function(t){c=!0,a=t},f:function(){try{i||null==r.return||r.return()}finally{if(c)throw a}}}}function L(t,e){if(t){if("string"==typeof t)return k(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?k(t,e):void 0}}function k(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function E(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,P(n.key),n)}}function P(t){var e=function(t){if("object"!=S(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=S(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==S(e)?e:e+""}var C=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.localStorage;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.boardSize=8,this.container=null,this.boardEl=null,this.cells=[],this.cellClickListeners=[],this.cellEnterListeners=[],this.cellLeaveListeners=[],this.newGameListeners=[],this.saveGameListeners=[],this.loadGameListeners=[],this.gameStateService=new w(e)}return e=t,r=[{key:"bindToDOM",value:function(t){if(!(t instanceof HTMLElement))throw new Error("container is not HTMLElement");this.container=t}},{key:"drawUi",value:function(t){var e,r,n,o,a,i,c=this;this.checkBinding(),this.container.innerHTML='\n      <div class="controls">\n        <button data-id="action-restart" class="btn">New Game</button>\n        <button data-id="action-save" class="btn">Save Game</button>\n        <button data-id="action-load" class="btn">Load Game</button>\n      </div>\n      <div class="board-container">\n        <div data-id="board" class="board"></div>\n      </div>\n    ',this.newGameEl=this.container.querySelector("[data-id=action-restart]"),this.saveGameEl=this.container.querySelector("[data-id=action-save]"),this.loadGameEl=this.container.querySelector("[data-id=action-load]"),this.newGameEl.addEventListener("click",(function(t){return c.onNewGameClick(t)})),this.saveGameEl.addEventListener("click",(function(t){return c.onSaveGameClick(t)})),this.loadGameEl.addEventListener("click",(function(t){return c.onLoadGameClick(t)})),this.boardEl=this.container.querySelector("[data-id=board]"),this.boardEl.classList.add(t);for(var l=0;l<Math.pow(this.boardSize,2);l+=1){var u=document.createElement("div");u.classList.add("cell","map-tile","map-tile-".concat((void 0,void 0,void 0,void 0,o=(e=l)>=(r=this.boardSize)*(r-1),a=e%r==0,i=(e+1)%r==0,(n=e<r)&&a?"top-left":n&&i?"top-right":o&&a?"bottom-left":o&&i?"bottom-right":n?"top":o?"bottom":a?"left":i?"right":"center"))),u.addEventListener("mouseenter",(function(t){return c.onCellEnter(t)})),u.addEventListener("mouseleave",(function(t){return c.onCellLeave(t)})),u.addEventListener("click",(function(t){return c.onCellClick(t)})),this.boardEl.appendChild(u)}this.cells=Array.from(this.boardEl.children)}},{key:"redrawPositions",value:function(t){var e,r=x(this.cells);try{for(r.s();!(e=r.n()).done;)e.value.innerHTML=""}catch(t){r.e(t)}finally{r.f()}var n,o,a=x(t);try{for(a.s();!(n=a.n()).done;){var i=n.value,c=this.boardEl.children[i.position],l=document.createElement("div");l.classList.add("character",i.character.type);var u=document.createElement("div");u.classList.add("health-level");var s=document.createElement("div");s.classList.add("health-level-indicator","health-level-indicator-".concat((o=i.character.health)<15?"critical":o<50?"normal":"high")),s.style.width="".concat(i.character.health,"%"),u.appendChild(s),l.appendChild(u),c.appendChild(l)}}catch(t){a.e(t)}finally{a.f()}}},{key:"addCellEnterListener",value:function(t){this.cellEnterListeners.push(t)}},{key:"addCellLeaveListener",value:function(t){this.cellLeaveListeners.push(t)}},{key:"addCellClickListener",value:function(t){this.cellClickListeners.push(t)}},{key:"addNewGameListener",value:function(t){this.newGameListeners.push(t)}},{key:"addSaveGameListener",value:function(t){this.saveGameListeners.push(t)}},{key:"addLoadGameListener",value:function(t){this.loadGameListeners.push(t)}},{key:"onCellEnter",value:function(t){t.preventDefault();var e=this.cells.indexOf(t.currentTarget);this.cellEnterListeners.forEach((function(t){return t.call(null,e)}))}},{key:"onCellLeave",value:function(t){t.preventDefault();var e=this.cells.indexOf(t.currentTarget);this.cellLeaveListeners.forEach((function(t){return t.call(null,e)}))}},{key:"onCellClick",value:function(t){var e=this.cells.indexOf(t.currentTarget);this.cellClickListeners.forEach((function(t){return t.call(null,e)}))}},{key:"onNewGameClick",value:function(t){t.preventDefault(),this.newGameListeners.forEach((function(t){return t.call(null)}))}},{key:"onSaveGameClick",value:function(e){var r=this;e.preventDefault(),this.saveGameListeners.forEach((function(e){var n=e.call(null);if(n)try{r.gameStateService.save(n),t.showMessage("Игра успешно сохранена!")}catch(e){t.showError("Ошибка при сохранении игры")}}))}},{key:"onLoadGameClick",value:function(e){e.preventDefault();try{var r=this.gameStateService.load();t.showMessage("Игра успешно загружена!"),this.redrawPositions(r.positionedCharacters),this.loadGameListeners.forEach((function(t){return t.call(null,r)}))}catch(e){t.showError(e.message)}}},{key:"selectCell",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"yellow";this.deselectCell(t),this.cells[t].classList.add("selected","selected-".concat(e))}},{key:"deselectCell",value:function(t){var e,r=this.cells[t];(e=r.classList).remove.apply(e,function(t){return function(t){if(Array.isArray(t))return k(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||L(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(Array.from(r.classList).filter((function(t){return t.startsWith("selected")}))))}},{key:"showCellTooltip",value:function(t,e){this.cells[e].title=t}},{key:"hideCellTooltip",value:function(t){var e=this.cells[t];e&&(e.title="")}},{key:"showDamage",value:function(t,e){var r=this;return new Promise((function(n){var o=r.cells[t],a=document.createElement("span");a.textContent=e,a.classList.add("damage"),o.appendChild(a),a.addEventListener("animationend",(function(){o.removeChild(a),n()}))}))}},{key:"setCursor",value:function(t){this.boardEl.style.cursor=t}},{key:"checkBinding",value:function(){if(null===this.container)throw new Error("GamePlay not bind to DOM")}}],n=[{key:"showError",value:function(t){alert(t)}},{key:"showMessage",value:function(t){alert(t)}}],r&&E(e.prototype,r),n&&E(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,r,n}();const O={name:"prairie",tiles:{bottom:"../img/prairie/map-tile-bottom.png","bottom-left":"../img/prairie/map-tile-bottom-left.png","bottom-right":"../img/prairie/map-tile-bottom-right.png",center:"../img/prairie/map-tile-center.png",left:"../img/prairie/map-tile-left.png",right:"../img/prairie/map-tile-right.png",top:"../img/prairie/map-tile-top.png","top-left":"../img/prairie/map-tile-top-left.png","top-right":"../img/prairie/map-tile-top-right.png"}},j={name:"desert",tiles:{bottom:"../img/desert/map-tile-bottom.png","bottom-left":"../img/desert/map-tile-bottom-left.png","bottom-right":"../img/desert/map-tile-bottom-right.png",center:"../img/desert/map-tile-center.png",left:"../img/desert/map-tile-left.png",right:"../img/desert/map-tile-right.png",top:"../img/desert/map-tile-top.png","top-left":"../img/desert/map-tile-top-left.png","top-right":"../img/desert/map-tile-top-right.png"}},T={name:"arctic",tiles:{bottom:"../img/arctic/map-tile-bottom.png","bottom-left":"../img/arctic/map-tile-bottom-left.png","bottom-right":"../img/arctic/map-tile-bottom-right.png",center:"../img/arctic/map-tile-center.png",left:"../img/arctic/map-tile-left.png",right:"../img/arctic/map-tile-right.png",top:"../img/arctic/map-tile-top.png","top-left":"../img/arctic/map-tile-top-left.png","top-right":"../img/arctic/map-tile-top-right.png"}},_={name:"mountain",tiles:{bottom:"../img/mountain/map-tile-bottom.png","bottom-left":"../img/mountain/map-tile-bottom-left.png","bottom-right":"../img/mountain/map-tile-bottom-right.png",center:"../img/mountain/map-tile-center.png",left:"../img/mountain/map-tile-left.png",right:"../img/mountain/map-tile-right.png",top:"../img/mountain/map-tile-top.png","top-left":"../img/mountain/map-tile-top-left.png","top-right":"../img/mountain/map-tile-top-right.png"}};function R(t){return R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},R(t)}function G(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function M(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,A(n.key),n)}}function A(t){var e=function(t){if("object"!=R(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=R(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==R(e)?e:e+""}var U=function(){return t=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.characters=Array.from(e)},e=[{key:"add",value:function(t){this.characters.push(t)}},{key:"addAll",value:function(){var t;(t=this.characters).push.apply(t,arguments)}},{key:"toArray",value:function(){return function(t){return function(t){if(Array.isArray(t))return G(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return G(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?G(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(this.characters)}}],e&&M(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();function I(t){return I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},I(t)}function $(){$=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function s(t,e,r,n){var a=e&&e.prototype instanceof v?e:v,i=Object.create(a.prototype),c=new T(n||[]);return o(i,"_invoke",{value:P(t,r,c)}),i}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var h="suspendedStart",p="suspendedYield",d="executing",y="completed",m={};function v(){}function g(){}function b(){}var w={};u(w,i,(function(){return this}));var S=Object.getPrototypeOf,x=S&&S(S(_([])));x&&x!==r&&n.call(x,i)&&(w=x);var L=b.prototype=v.prototype=Object.create(w);function k(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function E(t,e){function r(o,a,i,c){var l=f(t[o],t,a);if("throw"!==l.type){var u=l.arg,s=u.value;return s&&"object"==I(s)&&n.call(s,"__await")?e.resolve(s.__await).then((function(t){r("next",t,i,c)}),(function(t){r("throw",t,i,c)})):e.resolve(s).then((function(t){u.value=t,i(u)}),(function(t){return r("throw",t,i,c)}))}c(l.arg)}var a;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return a=a?a.then(o,o):o()}})}function P(e,r,n){var o=h;return function(a,i){if(o===d)throw Error("Generator is already running");if(o===y){if("throw"===a)throw i;return{value:t,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var l=C(c,n);if(l){if(l===m)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var u=f(e,r,n);if("normal"===u.type){if(o=n.done?y:p,u.arg===m)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=y,n.method="throw",n.arg=u.arg)}}}function C(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,C(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var a=f(o,e.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,m;var i=a.arg;return i?i.done?(r[e.resultName]=i.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,m):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function _(e){if(e||""===e){var r=e[i];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}throw new TypeError(I(e)+" is not iterable")}return g.prototype=b,o(L,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:g,configurable:!0}),g.displayName=u(b,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,u(t,l,"GeneratorFunction")),t.prototype=Object.create(L),t},e.awrap=function(t){return{__await:t}},k(E.prototype),u(E.prototype,c,(function(){return this})),e.AsyncIterator=E,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new E(s(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},k(L),u(L,l,"Generator"),u(L,i,(function(){return this})),u(L,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=_,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(j),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(l&&u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=e,a?(this.method="next",this.next=a.finallyLoc,m):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),j(r),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:_(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),m}},e}var N=$().mark(D);function D(t,e){var r;return $().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=t[Math.floor(Math.random()*t.length)],n.next=4,new r(e);case 4:n.next=0;break;case 6:case"end":return n.stop()}}),N)}function z(t,e,r){for(var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,o=D(t,e),a=[],i=0;i<r;i++){var c=o.next().value;if(n>1){var l=Math.pow(2,n-1);c.attack*=l,c.defence*=l}a.push(c)}return new U(a)}function F(t){return F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},F(t)}function B(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,q(n.key),n)}}function q(t){var e=function(t){if("object"!=F(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=F(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==F(e)?e:e+""}var H=function(){return t=function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"generic",n=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0,i=arguments.length>5?arguments[5]:void 0,c=arguments.length>6?arguments[6]:void 0;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),(this instanceof t?this.constructor:void 0)===t)throw new Error('Невозможно создать экземпляр базового класса "Character". Используйте наследника.');this.level=e||1,this.attack=n||0,this.defence=o||0,this.health=void 0!==a?a:50,this.type=r,this.x=0,this.y=0,this.moveRange=i||0,this.attackRange=c||0},(e=[{key:"canMoveTo",value:function(t,e){var r=Math.abs(this.x-t),n=Math.abs(this.y-e);return r<=this.moveRange&&n<=this.moveRange}},{key:"moveTo",value:function(t,e){this.canMoveTo(t,e)?(this.x=t,this.y=e,console.log("".concat(this.type," переместился на клетку (").concat(t,", ").concat(e,")"))):console.log("".concat(this.type," не может переместиться на клетку (").concat(t,", ").concat(e,")"))}},{key:"levelUp",value:function(){if(this.health<=0)throw new Error("Нельзя повысить уровень мёртвого персонажа");this.level+=1,this.health=Math.min(100,this.health+80),this.attack=Math.max(this.attack,this.attack*(80+this.health)/100),this.defence=Math.max(this.defence,this.defence*(80+this.health)/100)}}])&&B(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();function Y(t){return Y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Y(t)}function J(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,W(n.key),n)}}function Q(t,e,r){return e&&J(t.prototype,e),r&&J(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function W(t){var e=function(t){if("object"!=Y(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=Y(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Y(e)?e:e+""}var K=Q((function t(e,r){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),!(e instanceof H))throw new Error("Переданный объект не экземпляр класса character");if("number"!=typeof r)throw new Error("значение position не number");this.character=e,this.position=r}));function V(t){return V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},V(t)}function X(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(X=function(){return!!t})()}function Z(t){return Z=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Z(t)}function tt(t,e){return tt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},tt(t,e)}var et=function(t){function e(t,r,n,o,a,i){var c;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(c=function(t,e,r){return e=Z(e),function(t,e){if(e&&("object"==V(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,X()?Reflect.construct(e,r||[],Z(t).constructor):e.apply(t,r))}(this,e,[t,"bowman",r,n,o,a,i])).attack=void 0!==r?r:25,c.defence=void 0!==n?n:25,c.moveRange=void 0!==a?a:2,c.attackRange=void 0!==i?i:2,c}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&tt(t,e)}(e,t),r=e,Object.defineProperty(r,"prototype",{writable:!1}),r;var r}(H);function rt(t){return rt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},rt(t)}function nt(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(nt=function(){return!!t})()}function ot(t){return ot=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ot(t)}function at(t,e){return at=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},at(t,e)}var it=function(t){function e(t,r,n,o,a,i){var c;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(c=function(t,e,r){return e=ot(e),function(t,e){if(e&&("object"==rt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,nt()?Reflect.construct(e,r||[],ot(t).constructor):e.apply(t,r))}(this,e,[t,"swordsman",r,n,o,a,i])).attack=void 0!==r?r:40,c.defence=void 0!==n?n:10,c.moveRange=void 0!==a?a:4,c.attackRange=void 0!==i?i:1,c}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&at(t,e)}(e,t),r=e,Object.defineProperty(r,"prototype",{writable:!1}),r;var r}(H);function ct(t){return ct="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ct(t)}function lt(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(lt=function(){return!!t})()}function ut(t){return ut=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ut(t)}function st(t,e){return st=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},st(t,e)}var ft=function(t){function e(t,r,n,o,a,i){var c;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(c=function(t,e,r){return e=ut(e),function(t,e){if(e&&("object"==ct(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,lt()?Reflect.construct(e,r||[],ut(t).constructor):e.apply(t,r))}(this,e,[t,"magician",r,n,o,a,i])).attack=void 0!==r?r:10,c.defence=void 0!==n?n:40,c.moveRange=void 0!==a?a:1,c.attackRange=void 0!==i?i:4,c}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&st(t,e)}(e,t),r=e,Object.defineProperty(r,"prototype",{writable:!1}),r;var r}(H);function ht(t){return ht="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ht(t)}function pt(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(pt=function(){return!!t})()}function dt(t){return dt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},dt(t)}function yt(t,e){return yt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},yt(t,e)}var mt=function(t){function e(t,r,n,o,a,i){var c;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(c=function(t,e,r){return e=dt(e),function(t,e){if(e&&("object"==ht(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,pt()?Reflect.construct(e,r||[],dt(t).constructor):e.apply(t,r))}(this,e,[t,"vampire",r,n,o,a,i])).attack=void 0!==r?r:25,c.defence=void 0!==n?n:25,c.moveRange=void 0!==a?a:2,c.attackRange=void 0!==i?i:2;for(var l=1;l<t;l++)c.health=Math.min(100,c.health+80),c.attack=Math.max(c.attack,c.attack*(80+c.health)/100),c.defence=Math.max(c.defence,c.defence*(80+c.health)/100);return c}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&yt(t,e)}(e,t),r=e,Object.defineProperty(r,"prototype",{writable:!1}),r;var r}(H);function vt(t){return vt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vt(t)}function gt(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(gt=function(){return!!t})()}function bt(t){return bt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},bt(t)}function wt(t,e){return wt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},wt(t,e)}var St=function(t){function e(t,r,n,o,a,i){var c;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(c=function(t,e,r){return e=bt(e),function(t,e){if(e&&("object"==vt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,gt()?Reflect.construct(e,r||[],bt(t).constructor):e.apply(t,r))}(this,e,[t,"undead",r,n,o,a,i])).attack=void 0!==r?r:40,c.defence=void 0!==n?n:10,c.moveRange=void 0!==a?a:4,c.attackRange=void 0!==i?i:1;for(var l=1;l<t;l++)c.health=Math.min(100,c.health+80),c.attack=Math.max(c.attack,c.attack*(80+c.health)/100),c.defence=Math.max(c.defence,c.defence*(80+c.health)/100);return c}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&wt(t,e)}(e,t),r=e,Object.defineProperty(r,"prototype",{writable:!1}),r;var r}(H);function xt(t){return xt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xt(t)}function Lt(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Lt=function(){return!!t})()}function kt(t){return kt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},kt(t)}function Et(t,e){return Et=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Et(t,e)}var Pt=function(t){function e(t,r,n,o,a,i){var c;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(c=function(t,e,r){return e=kt(e),function(t,e){if(e&&("object"==xt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Lt()?Reflect.construct(e,r||[],kt(t).constructor):e.apply(t,r))}(this,e,[t,"daemon",r,n,o,a,i])).attack=void 0!==r?r:10,c.defence=void 0!==n?n:10,c.moveRange=void 0!==a?a:1,c.attackRange=void 0!==i?i:4;for(var l=1;l<t;l++)c.health=Math.min(100,c.health+80),c.attack=Math.max(c.attack,c.attack*(80+c.health)/100),c.defence=Math.max(c.defence,c.defence*(80+c.health)/100);return c}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Et(t,e)}(e,t),r=e,Object.defineProperty(r,"prototype",{writable:!1}),r;var r}(H);function Ct(t){return Ct="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ct(t)}function Ot(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,jt(n.key),n)}}function jt(t){var e=function(t){if("object"!=Ct(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=Ct(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Ct(e)?e:e+""}var Tt=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.currentPlayer="player",this.currentLevel=1,this.score=0,this.maxScore=0,this.playerTeam=[],this.opponentTeam=[],this.positionedCharacters=[],this.selectedCharacterIndex=null,this.isGameOver=!1,this.theme="prairie"}return e=t,n=[{key:"from",value:function(e){var r,n=new t;return n.currentPlayer=e.currentPlayer||"player",n.currentLevel=e.currentLevel||1,n.score=e.score||0,n.maxScore=e.maxScore||0,n.playerTeam=e.playerTeam||[],n.opponentTeam=e.opponentTeam||[],n.positionedCharacters=e.positionedCharacters||[],n.selectedCharacterIndex=null!==(r=e.selectedCharacterIndex)&&void 0!==r?r:null,n.isGameOver=e.isGameOver||!1,n.theme=e.theme||"prairie",n}}],(r=[{key:"togglePlayer",value:function(){this.currentPlayer="player"===this.currentPlayer?"computer":"player"}},{key:"getCurrentPlayer",value:function(){return this.currentPlayer}},{key:"addScore",value:function(t){this.score+=t,this.maxScore=Math.max(this.maxScore,this.score)}},{key:"resetScore",value:function(){this.score=0}}])&&Ot(e.prototype,r),n&&Ot(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,r,n}();function _t(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return Rt(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Rt(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return i=t.done,t},e:function(t){c=!0,a=t},f:function(){try{i||null==r.return||r.return()}finally{if(c)throw a}}}}function Rt(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function Gt(t){return Gt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Gt(t)}function Mt(){Mt=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function s(t,e,r,n){var a=e&&e.prototype instanceof v?e:v,i=Object.create(a.prototype),c=new T(n||[]);return o(i,"_invoke",{value:P(t,r,c)}),i}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var h="suspendedStart",p="suspendedYield",d="executing",y="completed",m={};function v(){}function g(){}function b(){}var w={};u(w,i,(function(){return this}));var S=Object.getPrototypeOf,x=S&&S(S(_([])));x&&x!==r&&n.call(x,i)&&(w=x);var L=b.prototype=v.prototype=Object.create(w);function k(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function E(t,e){function r(o,a,i,c){var l=f(t[o],t,a);if("throw"!==l.type){var u=l.arg,s=u.value;return s&&"object"==Gt(s)&&n.call(s,"__await")?e.resolve(s.__await).then((function(t){r("next",t,i,c)}),(function(t){r("throw",t,i,c)})):e.resolve(s).then((function(t){u.value=t,i(u)}),(function(t){return r("throw",t,i,c)}))}c(l.arg)}var a;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return a=a?a.then(o,o):o()}})}function P(e,r,n){var o=h;return function(a,i){if(o===d)throw Error("Generator is already running");if(o===y){if("throw"===a)throw i;return{value:t,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var l=C(c,n);if(l){if(l===m)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var u=f(e,r,n);if("normal"===u.type){if(o=n.done?y:p,u.arg===m)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=y,n.method="throw",n.arg=u.arg)}}}function C(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,C(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var a=f(o,e.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,m;var i=a.arg;return i?i.done?(r[e.resultName]=i.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,m):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function _(e){if(e||""===e){var r=e[i];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}throw new TypeError(Gt(e)+" is not iterable")}return g.prototype=b,o(L,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:g,configurable:!0}),g.displayName=u(b,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,u(t,l,"GeneratorFunction")),t.prototype=Object.create(L),t},e.awrap=function(t){return{__await:t}},k(E.prototype),u(E.prototype,c,(function(){return this})),e.AsyncIterator=E,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new E(s(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},k(L),u(L,l,"Generator"),u(L,i,(function(){return this})),u(L,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=_,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(j),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(l&&u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=e,a?(this.method="next",this.next=a.finallyLoc,m):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),j(r),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:_(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),m}},e}function At(t,e,r,n,o,a,i){try{var c=t[a](i),l=c.value}catch(t){return void r(t)}c.done?e(l):Promise.resolve(l).then(n,o)}function Ut(t,e,r,n){return It.apply(this,arguments)}function It(){var t;return t=Mt().mark((function t(e,r,n,o){var a,i,c;return Mt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=Math.round(Math.max(e.attack-r.defence,.1*e.attack)),r.health=Math.max(0,r.health-a),i=n.find((function(t){return t.character===r}))){t.next=5;break}throw new Error("Позиция цели не найдена");case 5:return t.next=7,o.showDamage(i.position,a);case 7:return o.redrawPositions(n),c=n.filter((function(t){return t.character.health>0})),t.abrupt("return",c);case 10:case"end":return t.stop()}}),t)})),It=function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function i(t){At(a,n,o,i,c,"next",t)}function c(t){At(a,n,o,i,c,"throw",t)}i(void 0)}))},It.apply(this,arguments)}function $t(){$t=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function s(t,e,r,n){var a=e&&e.prototype instanceof v?e:v,i=Object.create(a.prototype),c=new T(n||[]);return o(i,"_invoke",{value:P(t,r,c)}),i}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var h="suspendedStart",p="suspendedYield",d="executing",y="completed",m={};function v(){}function g(){}function b(){}var w={};u(w,i,(function(){return this}));var S=Object.getPrototypeOf,x=S&&S(S(_([])));x&&x!==r&&n.call(x,i)&&(w=x);var L=b.prototype=v.prototype=Object.create(w);function k(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function E(t,e){function r(o,a,i,c){var l=f(t[o],t,a);if("throw"!==l.type){var u=l.arg,s=u.value;return s&&"object"==qt(s)&&n.call(s,"__await")?e.resolve(s.__await).then((function(t){r("next",t,i,c)}),(function(t){r("throw",t,i,c)})):e.resolve(s).then((function(t){u.value=t,i(u)}),(function(t){return r("throw",t,i,c)}))}c(l.arg)}var a;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return a=a?a.then(o,o):o()}})}function P(e,r,n){var o=h;return function(a,i){if(o===d)throw Error("Generator is already running");if(o===y){if("throw"===a)throw i;return{value:t,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var l=C(c,n);if(l){if(l===m)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var u=f(e,r,n);if("normal"===u.type){if(o=n.done?y:p,u.arg===m)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=y,n.method="throw",n.arg=u.arg)}}}function C(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,C(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var a=f(o,e.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,m;var i=a.arg;return i?i.done?(r[e.resultName]=i.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,m):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function _(e){if(e||""===e){var r=e[i];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}throw new TypeError(qt(e)+" is not iterable")}return g.prototype=b,o(L,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:g,configurable:!0}),g.displayName=u(b,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,u(t,l,"GeneratorFunction")),t.prototype=Object.create(L),t},e.awrap=function(t){return{__await:t}},k(E.prototype),u(E.prototype,c,(function(){return this})),e.AsyncIterator=E,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new E(s(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},k(L),u(L,l,"Generator"),u(L,i,(function(){return this})),u(L,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=_,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(j),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(l&&u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=e,a?(this.method="next",this.next=a.finallyLoc,m):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),j(r),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:_(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),m}},e}function Nt(t,e,r,n,o,a,i){try{var c=t[a](i),l=c.value}catch(t){return void r(t)}c.done?e(l):Promise.resolve(l).then(n,o)}function Dt(t){return function(t){if(Array.isArray(t))return Bt(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||Ft(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function zt(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=Ft(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return i=t.done,t},e:function(t){c=!0,a=t},f:function(){try{i||null==r.return||r.return()}finally{if(c)throw a}}}}function Ft(t,e){if(t){if("string"==typeof t)return Bt(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Bt(t,e):void 0}}function Bt(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function qt(t){return qt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qt(t)}function Ht(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Yt(n.key),n)}}function Yt(t){var e=function(t){if("object"!=qt(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=qt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==qt(e)?e:e+""}var Jt=function(){return t=function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.gamePlay=e,this.stateService=r,this.playerTeam=null,this.opponentTeam=null,this.positionedCharacters=[],this.currentLevel=1,this.isGameOver=!1,this.selectedCharacterIndex=void 0,this.gameState=new Tt},e=[{key:"createCharacterFromData",value:function(t){var e=t.level,r=t.attack,n=t.defence,o=t.health,a=t.type,i=t.moveRange,c=t.attackRange,l={bowman:et,swordsman:it,magician:ft,vampire:mt,undead:St,daemon:Pt}[a];if(!l)throw new Error("Неизвестный тип персонажа: ".concat(a));return new l(e,r,n,o,i,c)}},{key:"loadGameState",value:function(t){try{if(!t||"object"!==qt(t))throw new Error("Некорректное загруженное состояние игры");this.gameState=Tt.from(t),this.currentLevel=t.currentLevel||1,this.isGameOver=t.isGameOver||!1,this.playerTeam=new U,this.opponentTeam=new U,this.positionedCharacters=[];var e,r=zt(t.positionedCharacters);try{for(r.s();!(e=r.n()).done;){var n=e.value,o=n.character,a=n.position;if(a<0||a>=Math.pow(this.gamePlay.boardSize,2))throw new Error("Некорректная позиция персонажа: ".concat(a));var i=this.createCharacterFromData(o);this.positionedCharacters.push(new K(i,a)),["bowman","swordsman","magician"].includes(i.type)?this.playerTeam.add(i):["vampire","undead","daemon"].includes(i.type)&&this.opponentTeam.add(i)}}catch(t){r.e(t)}finally{r.f()}var c=this.getThemeForLevel(this.currentLevel);this.gamePlay.drawUi(c),this.gamePlay.redrawPositions(this.positionedCharacters),void 0!==this.selectedCharacterIndex&&(this.gamePlay.deselectCell(this.selectedCharacterIndex),this.selectedCharacterIndex=void 0)}catch(t){C.showError("Ошибка при загрузке игры: ".concat(t.message))}}},{key:"saveGameState",value:function(){try{this.gameState.currentLevel=this.currentLevel,this.gameState.isGameOver=this.isGameOver;var t=this.positionedCharacters.map((function(t){return{type:t.character.type,level:t.character.level,attack:t.character.attack,defence:t.character.defence,health:t.character.health,x:t.character.x,y:t.character.y,moveRange:t.character.moveRange,attackRange:t.character.attackRange}}));this.gameState.playerTeam=t.filter((function(t){return["bowman","swordsman","magician"].includes(t.type)})),this.gameState.opponentTeam=t.filter((function(t){return["vampire","undead","daemon"].includes(t.type)})),this.gameState.positionedCharacters=this.positionedCharacters.map((function(e){return{character:t.find((function(t){return t.type===e.character.type&&t.health===e.character.health})),position:e.position}})),this.stateService.save(this.gameState),C.showMessage("Игра успешно сохранена")}catch(t){C.showError("Ошибка при сохранении игры: ".concat(t.message))}}},{key:"init",value:function(){var t=this;this.gamePlay.drawUi(O.name),this.generateTeams(),this.placeCharacters(),this.gamePlay.redrawPositions(this.positionedCharacters);this.gamePlay.addCellClickListener((function(e){return t.onCellClick(e)})),this.gamePlay.addCellEnterListener((function(e){return t.onCellEnter(e)})),this.gamePlay.addCellLeaveListener((function(e){return t.onCellLeave(e)})),this.gamePlay.addNewGameListener((function(){return t.startNewGame()})),this.gamePlay.addSaveGameListener((function(){return t.saveGameState()})),this.gamePlay.addLoadGameListener((function(e){return t.loadGameState(e)}))}},{key:"generateTeams",value:function(){var t=[et,it,ft],e=[mt,St,Pt],r=this.currentLevel;this.playerTeam=z(t,r,4),this.opponentTeam=z(e,r,4)}},{key:"placeCharacters",value:function(){this.positionedCharacters=[];var t=this.gamePlay.boardSize,e=[].concat(Dt(Array.from({length:t},(function(e,r){return r*t}))),Dt(Array.from({length:t},(function(e,r){return r*t+1})))),r=[].concat(Dt(Array.from({length:t},(function(e,r){return r*t+t-2}))),Dt(Array.from({length:t},(function(e,r){return r*t+t-1}))));this.placeTeam(this.playerTeam,e),this.placeTeam(this.opponentTeam,r)}},{key:"placeTeam",value:function(t,e){var r,n=new Set,o=zt(t.characters);try{for(o.s();!(r=o.n()).done;){var a=r.value,i=e.filter((function(t){return!n.has(t)}));if(!i.length)throw new Error("Недостаточно свободных позиций для размещения всех персонажей");var c=i[Math.floor(Math.random()*i.length)];n.add(c),this.positionedCharacters.push(new K(a,c))}}catch(t){o.e(t)}finally{o.f()}}},{key:"onCellClick",value:function(t){var e=this;if(!this.isGameOver&&"player"===this.gameState.getCurrentPlayer()){var r=this.positionedCharacters.find((function(e){return e.position===t}));if(r)if(this.isPlayer(r.character))void 0!==this.selectedCharacterIndex&&this.gamePlay.deselectCell(this.selectedCharacterIndex),this.selectedCharacterIndex=t,this.gamePlay.selectCell(t);else if(void 0!==this.selectedCharacterIndex){var n=this.positionedCharacters.find((function(t){return t.position===e.selectedCharacterIndex}));this.getAttackRange(n.position,this.getAttackDistance(n.character.type)).has(t)&&this.performAttack(n.character,r.character,this.positionedCharacters).then((function(n){e.positionedCharacters=n,e.gamePlay.redrawPositions(e.positionedCharacters),r.character.health<=0&&e.gameState.addScore(100);var o=e.checkGameEnd();e.gamePlay.deselectCell(e.selectedCharacterIndex),e.gamePlay.deselectCell(t),e.selectedCharacterIndex=void 0,o||(e.gameState.togglePlayer(),setTimeout((function(){return e.computerTurn()}),500))}))}else C.showError("Сначала выберите своего персонажа!");else if(void 0!==this.selectedCharacterIndex){var o=this.positionedCharacters.find((function(t){return t.position===e.selectedCharacterIndex}));this.getMoveRange(o.position,this.getMoveDistance(o.character.type)).includes(t)&&!this.positionedCharacters.some((function(e){return e.position===t}))?(o.position=t,this.gamePlay.deselectCell(this.selectedCharacterIndex),this.gamePlay.deselectCell(t),this.selectedCharacterIndex=void 0,this.gamePlay.redrawPositions(this.positionedCharacters),this.gameState.togglePlayer(),setTimeout((function(){return e.computerTurn()}),100)):C.showError("Недопустимый ход!")}else C.showError("Выберите персонажа!")}}},{key:"onCellEnter",value:function(t){var e,r,n,o,a=this;if(!this.isGameOver){var i=this.positionedCharacters.find((function(e){return e.position===t}));if(i){var c=i.character,l=(e=c.level,r=c.attack,n=c.defence,o=c.health,"🎖".concat(e," ⚔").concat(r," 🛡").concat(n," ❤").concat(o));if(this.gamePlay.showCellTooltip(l,t),this.isPlayer(i.character))this.gamePlay.setCursor("pointer");else if(void 0!==this.selectedCharacterIndex){var u=this.positionedCharacters.find((function(t){return t.position===a.selectedCharacterIndex}));this.getAttackRange(u.position,this.getAttackDistance(u.character.type)).has(t)?(this.gamePlay.setCursor("crosshair"),this.gamePlay.selectCell(t,"red")):this.gamePlay.setCursor("not-allowed")}else this.gamePlay.setCursor("not-allowed")}else this.handleMoveCursor(t)}}},{key:"onCellLeave",value:function(t){this.isGameOver||(this.gamePlay.hideCellTooltip(t),t!==this.selectedCharacterIndex&&this.gamePlay.deselectCell(t),this.gamePlay.setCursor("auto"))}},{key:"handleMoveCursor",value:function(t){var e=this;if(void 0!==this.selectedCharacterIndex){var r=this.positionedCharacters.find((function(t){return t.position===e.selectedCharacterIndex}));this.getMoveRange(r.position,this.getMoveDistance(r.character.type)).includes(t)&&!this.positionedCharacters.some((function(e){return e.position===t}))?(this.gamePlay.setCursor("pointer"),this.gamePlay.selectCell(t,"green")):this.gamePlay.setCursor("not-allowed")}else this.gamePlay.setCursor("not-allowed")}},{key:"isPlayer",value:function(t){return["bowman","swordsman","magician"].includes(t.type)}},{key:"getMoveRange",value:function(t,e){return function(t,e,r){for(var n=[t%r,Math.floor(t/r)],o=n[0],a=n[1],i=[],c=-e;c<=e;c++)for(var l=-e;l<=e;l++){var u=o+c,s=a+l;u>=0&&u<r&&s>=0&&s<r&&(0===c&&0===l||i.push(s*r+u))}return i}(t,e,this.gamePlay.boardSize)}},{key:"getMoveDistance",value:function(t){return function(t){switch(t){case"swordsman":case"undead":return 4;case"bowman":case"vampire":return 2;case"magician":case"daemon":return 1;default:return 0}}(t)}},{key:"getAttackDistance",value:function(t){return function(t){switch(t){case"swordsman":case"undead":return 1;case"bowman":case"vampire":return 2;case"magician":case"daemon":return 4;default:return 0}}(t)}},{key:"getAttackRange",value:function(t,e){return function(t,e,r){for(var n=new Set,o=Math.floor(t/r),a=t%r,i=0;i<r;i++)for(var c=0;c<r;c++){var l=Math.abs(a-c),u=Math.abs(o-i);if(l<=e&&u<=e){var s=i*r+c;n.add(s)}}return n}(t,e,this.gamePlay.boardSize)}},{key:"performAttack",value:(r=$t().mark((function t(e,r,n){return $t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Ut(e,r,n,this.gamePlay));case 1:case"end":return t.stop()}}),t,this)})),n=function(){var t=this,e=arguments;return new Promise((function(n,o){var a=r.apply(t,e);function i(t){Nt(a,n,o,i,c,"next",t)}function c(t){Nt(a,n,o,i,c,"throw",t)}i(void 0)}))},function(t,e,r){return n.apply(this,arguments)})},{key:"computerTurn",value:function(){!function(t){if(!t.isGameOver&&"computer"===t.gameState.getCurrentPlayer()){var e=t.positionedCharacters.filter((function(e){return!t.isPlayer(e.character)})),r=t.positionedCharacters.filter((function(e){return t.isPlayer(e.character)}));if(0!==e.length&&0!==r.length){var n,o=e[Math.floor(Math.random()*e.length)],a=null,i=1/0,c=_t(r);try{for(c.s();!(n=c.n()).done;){var l=n.value,u=t.calculateDistance(o.position,l.position);u<i&&(i=u,a=l)}}catch(t){c.e(t)}finally{c.f()}if(a)if(t.getAttackRange(o.position,t.getAttackDistance(o.character.type)).has(a.position))t.performAttack(o.character,a.character,t.positionedCharacters).then((function(e){t.positionedCharacters=e,t.gamePlay.redrawPositions(t.positionedCharacters),a.character.health<=0&&t.gameState.addScore(100),t.checkGameEnd(),t.gameState.togglePlayer()})).catch((function(e){console.error("Ошибка при выполнении атаки:",e),t.gameState.togglePlayer()}));else{var s,f=t.getMoveRange(o.position,t.getMoveDistance(o.character.type)),h=o.position,p=t.calculateDistance(o.position,a.position),d=_t(f);try{var y=function(){var e=s.value;if(!t.positionedCharacters.some((function(t){return t.position===e}))){var r=t.calculateDistance(e,a.position);r<p&&(p=r,h=e)}};for(d.s();!(s=d.n()).done;)y()}catch(t){d.e(t)}finally{d.f()}h!==o.position&&(o.position=h,t.gamePlay.redrawPositions(t.positionedCharacters)),t.gameState.togglePlayer()}}else t.checkGameEnd()}}(this)}},{key:"calculateDistance",value:function(t,e){var r=this.gamePlay.boardSize,n=t%r,o=Math.floor(t/r),a=e%r,i=Math.floor(e/r);return Math.abs(n-a)+Math.abs(o-i)}},{key:"levelUpCharacter",value:function(t){t.level+=1,t.health=Math.min(t.health+80,100);var e=t.health;t.attack=Math.max(t.attack,t.attack*(80+e)/100),t.defence=Math.max(t.defence,t.defence*(80+e)/100)}},{key:"levelUp",value:function(){var t=this;this.positionedCharacters.filter((function(e){return t.isPlayer(e.character)})).forEach((function(e){return t.levelUpCharacter(e.character)})),this.gameState.addScore(500)}},{key:"checkGameEnd",value:function(){var t=this,e=this.positionedCharacters.filter((function(e){return!t.isPlayer(e.character)})),r=this.positionedCharacters.filter((function(e){return t.isPlayer(e.character)}));return 0===e.length&&r.length>0?(this.levelUp(),this.startNewLevel(),!0):0===r.length&&(this.isGameOver=!0,alert("Игра окончена! Победа компьютера! Счет: ".concat(this.gameState.score,", Максимальный счет: ").concat(this.gameState.maxScore)),!1)}},{key:"startNewLevel",value:function(){var t=this;this.currentLevel+=1;var e={2:j.name,3:T.name,4:_.name}[this.currentLevel]||O.name;if(this.currentLevel>4){this.isGameOver=!0,alert("Поздравляем! Вы прошли игру! Счет: ".concat(this.gameState.score,", Максимальный счет: ").concat(this.gameState.maxScore));try{this.stateService.save(this.gameState)}catch(t){console.warn("Ошибка сохранения состояния:",t)}}else{this.gamePlay.drawUi(e);var r=this.positionedCharacters.filter((function(e){return t.isPlayer(e.character)})).map((function(t){return t.character})),n=[mt,St,Pt],o=this.currentLevel;this.opponentTeam=z(n,o,4),this.playerTeam=new U,r.forEach((function(e){return t.playerTeam.add(e)})),this.placeCharacters(),this.gamePlay.redrawPositions(this.positionedCharacters),this.gameState.currentPlayer="player";try{this.stateService.save(this.gameState)}catch(t){console.warn("Ошибка сохранения состояния:",t)}}}},{key:"startNewGame",value:function(){this.isGameOver=!1,this.currentLevel=1,this.gameState.resetScore(),this.gameState.currentPlayer="player",this.positionedCharacters=[],this.selectedCharacterIndex=void 0,this.gamePlay.drawUi(O.name),this.generateTeams(),this.placeCharacters(),this.gamePlay.redrawPositions(this.positionedCharacters)}},{key:"getThemeForLevel",value:function(t){return{1:O.name,2:j.name,3:T.name,4:_.name}[t]||O.name}}],e&&Ht(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r,n}(),Qt=new C;Qt.bindToDOM(document.querySelector("#game-container")),new Jt(Qt,new w(localStorage)).init()})();